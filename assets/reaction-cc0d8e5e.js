(function(){const o=document.createElement("link").relList;if(o&&o.supports&&o.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))r(e);new MutationObserver(e=>{for(const t of e)if(t.type==="childList")for(const c of t.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&r(c)}).observe(document,{childList:!0,subtree:!0});function i(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),e.crossOrigin==="use-credentials"?t.credentials="include":e.crossOrigin==="anonymous"?t.credentials="omit":t.credentials="same-origin",t}function r(e){if(e.ep)return;e.ep=!0;const t=i(e);fetch(e.href,t)}})();console.log("Script started successfully");const s=document.getElementById("myReactionList");function a(n){let o=WA.state.loadVariable("reactions");if(o.playerId.hasOwnProperty(WA.player.id))for(const[e,t]of Object.entries(o))e===n&&t.counter>0&&(t.counter--,delete o.playerId[WA.player.id]);else{for(const[e,t]of Object.entries(o))if(e===n){t.counter++;var i=WA.sound.loadSound(`../public/audios/${n}.mp3`),r={volume:.5,loop:!1,rate:1,detune:1,delay:0,seek:0,mute:!1};i.play(r)}o.playerId[WA.player.id]=n}WA.state.saveVariable("reactions",o).catch(e=>console.error("Something went wrong while saving variable",e))}WA.onInit().then(()=>{console.log("Scripting API ready for reaction.ts");let n=WA.state.loadVariable("reactions");for(const[o,i]of Object.entries(n))if(o!="playerId"){const r=document.createElement("li");r.classList.add("reaction-item");const e=document.createElement("span");e.classList.add("emoji"),e.textContent=i.emoji;const t=document.createElement("span");t.classList.add("counter"),t.textContent=String(i.counter),r.appendChild(e),r.appendChild(t),r.addEventListener("click",()=>{a(o),t.textContent=String(i.counter)}),s.appendChild(r)}}).catch(n=>console.error(n));
